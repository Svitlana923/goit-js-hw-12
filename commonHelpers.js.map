{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n    \nconst galleryEl = document.querySelector('.gallery-o');\nconst formElem = document.querySelector('.search-form');\nconst lightbox = new SimpleLightbox('.gallery-o');\n\n\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\nexport function renderImages(array) {\n    const markup = array\n        .map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    galleryEl.innerHTML = markup;\n\n    const lightbox = new SimpleLightbox('.gallery-o a', options);\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n    formElem.reset();\n}\n\n\nexport function renderMoreImages(array) {\nconst markup = array\n.map(\n    ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    galleryEl.insertAdjacentHTML(\"beforeend\", markup);\n    const lightbox = new SimpleLightbox('.gallery-o a', options);\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n    formElem.reset();\n}\n","import axios from \"axios\";\nimport { value } from '../main.js';\n\n\nexport async function getPhotoBySearch(value) {\n    try {\n        const KEY = '42424645-ecd3f1048329df1dec069e6a8';\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: KEY,\n                q: value,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page: '1',\n                per_page: '15'\n            }\n        });\n\n        if (response.data.total === 0) {\n            throw new Error('No images found');\n        }\n\n      return response.data;\n    } catch (error) {\n        throw error; \n    }\n}\n\nlet page = 1;\nlet perPage = 15;\n\n\nexport async function fetchMoreImages(value) {\n    try {\n        const params = new URLSearchParams({\n            key: '42424645-ecd3f1048329df1dec069e6a8',\n            q: value,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            _limit: perPage,\n            _page: page\n        });\n\n      const response = await axios.get(\n            `https://pixabay.com/api/?${params}`\n        );\n        if (response.data.total === 0) {\n            throw new Error('No images found');\n        }\n\n        return response.data;\n    } catch (error) {\n        throw error;\n    }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderImages } from './js/render-functions.js';\nimport { getPhotoBySearch } from './js/pixabay-api.js';\nimport { renderMoreImages } from './js/render-functions.js';\nimport { fetchMoreImages } from './js/pixabay-api.js';\n\nconst formElem = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery-o');\nconst loaderElem = document.querySelector('.loader');\nconst loaderElem2 = document.querySelector('.more-loader');\nconst loadMoreBtn = document.querySelector('.more-btn');\nexport const value = document.querySelector('.input-search').value;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n    hideLoader();\n    \n    formElem.addEventListener('submit', onSubmit);\n\n\n    function onSubmit(e) {\n        e.preventDefault();\n        showLoader();\n        galleryEl.innerHTML = '';\n        \n        \n        getPhotoBySearch(value)\n            .then(data => {\n                renderImages(data.hits);\n            })\n            .catch(error => {\n                renderError(error);\n            })\n            .finally(() => {\n                hideLoader();\n            });\n    }\n\n    function renderError(error) {\n        galleryEl.innerHTML = '';\n        iziToast.show({\n            message: `❌ \"${error.message}\". Please try again!`,\n            color: 'red',\n            position: 'topRight',\n            maxWidth: '400px',\n        });\n    }\n});\n\nfunction showLoader() {\n    loaderElem.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loaderElem.style.display = 'none';\n}\n\nlet page = 1;\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  try {\n    const images = await fetchMoreImages(value);\n    renderMoreImages();\n    page += 1;\n\n    if (page > 1) {\n  \n    }\n  }catch(error) {\n    console.log(error);\n  }\n});"],"names":["galleryEl","formElem","SimpleLightbox","options","renderImages","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","lightbox","renderMoreImages","getPhotoBySearch","value","KEY","response","axios","error","page","perPage","fetchMoreImages","params","loaderElem","loadMoreBtn","hideLoader","onSubmit","e","showLoader","data","renderError","iziToast","images"],"mappings":"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"}