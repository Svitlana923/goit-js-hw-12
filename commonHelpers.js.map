{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n    \nconst galleryEl = document.querySelector('.gallery-o');\nconst formElem = document.querySelector('.search-form');\nconst lightbox = new SimpleLightbox('.gallery-o');\n\n\n\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\nexport function renderImages(array) {\n    const markup = array\n        .map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    galleryEl.innerHTML = markup;\n\n    const lightbox = new SimpleLightbox('.gallery-o a', options);\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n    formElem.reset();\n}\n\n\nexport function renderMoreImages(images, galleryEl, formElem) {\n    const markup = images\n        .map(\n    ({ largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    galleryEl.insertAdjacentHTML(\"beforeend\", markup);\n    const lightbox = new SimpleLightbox('.gallery-o a', options);\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n    formElem.reset();\n}\n","import axios from \"axios\";\n\nimport { value } from '../main.js';\nimport { page } from '../main.js';\n\n\nexport async function getPhotoBySearch(value, currentPage) {\n    try {\n        const KEY = '42424645-ecd3f1048329df1dec069e6a8';\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: KEY,\n                q: value,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page: currentPage,\n                per_page: '15'\n            }\n        });\n\n        if (response.data.total === 0) {\n            throw new Error('No images found');\n        }\n\n      return response.data;\n    } catch (error) {\n        throw error; \n    }\n}\n\n\nexport async function fetchMoreImages(value, currentPage) {\n    try {\n        const params = new URLSearchParams({\n            key: '42424645-ecd3f1048329df1dec069e6a8',\n            q: value,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: '15',\n            page: currentPage\n        });\n\n      let images = await axios.get(\n            `https://pixabay.com/api/?${params}`\n        );\n        if (images.data.total === 0) {\n            throw new Error('No images found');\n        }\n\n        return images.data;\n    } catch (error) {\n        throw error;\n    }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderImages } from './js/render-functions.js';\nimport { getPhotoBySearch } from './js/pixabay-api.js';\nimport { renderMoreImages } from './js/render-functions.js';\nimport { fetchMoreImages } from './js/pixabay-api.js';\n\nconst formElem = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery-o');\nconst loaderElem = document.querySelector('.loader');\nconst loaderElem2 = document.querySelector('.more-loader');\nconst loadMoreBtn = document.querySelector('.more-btn');\nexport let value;\nexport let page;\nlet maxPage;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n    hideLoader();\n    \n    formElem.addEventListener('submit', onSubmit);\n\n\n   async function onSubmit(e) {\n    e.preventDefault();\n    showLoader();\n    galleryEl.innerHTML = '';\n    page = 1;\n    value = formElem.querySelector('.input-search').value;\n\n    try {\n        const data = await getPhotoBySearch(value, page);\n        renderImages(data.hits);\n        maxPage = Math.ceil(data.totalHits / 15);\n    } catch (error) {\n        renderError(error);\n    } finally {\n        hideLoader();\n        checkBtnVisibleStatus();\n    }\n}\n\n    function renderError(error) {\n        galleryEl.innerHTML = '';\n        iziToast.show({\n            message: `❌ \"${error.message}\". Please try again!`,\n            color: 'red',\n            position: 'topRight',\n            maxWidth: '400px',\n        });\n    }\n});\n\nfunction showLoader() {\n    loaderElem.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loaderElem.style.display = 'none';\n}\n\n//function showLoader2() {\n//    loaderElem2.classList.remove('hidden');\n//}\n\n//function hideLoader2() {\n  //  loaderElem2.classList.add('hidden');\n//}\n\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n//    showLoader2();\n  try {\n    const images = await fetchMoreImages(value, page);\n      renderMoreImages(images);\n      \n    page += 1;\n      checkBtnVisibleStatus();\n    if (page > 1) {\n  \n    }\n  }catch(error) {\n    console.log(error);\n    }\n   // hideLoader2();\n});\n\n\nfunction showMoreLoadBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\nfunction hideMoreLoadBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hideMoreLoadBtn();\n  } else {\n    showMoreLoadBtn();\n  }\n}"],"names":["galleryEl","formElem","SimpleLightbox","options","renderImages","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","lightbox","renderMoreImages","images","getPhotoBySearch","value","currentPage","KEY","response","axios","error","fetchMoreImages","params","loaderElem","loadMoreBtn","page","maxPage","hideLoader","onSubmit","e","showLoader","data","renderError","checkBtnVisibleStatus","iziToast","showMoreLoadBtn","hideMoreLoadBtn"],"mappings":"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"}